<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base href="/c2pa/">
    <title>Image Metadata Viewer</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- Main Image Area -->
        <div class="main-content full-drop-zone" id="dropZone">
            <div class="image-container">
                <img id="mainImage" class="framed-image" src="" alt="Main Image" style="display: none;">
            </div>
            
            <!-- Welcome / Drop Zone -->
            <div id="dragDropZone" class="welcome-zone">
                <!-- Spinner behind select button (moved outside welcome-content) -->
                <div id="loadingIndicator" class="loading-indicator" style="display: none;">
                    <svg class="spinner-dots" viewBox="0 0 1195 1195" xmlns="http://www.w3.org/2000/svg">
                        <path d="M469.333 192c0-70.692 57.308-128 128-128s128 57.308 128 128c0 70.692-57.308 128-128 128s-128-57.308-128-128zm271.53 112.47c0-70.692 57.308-128 128-128s128 57.308 128 128c0 70.692-57.308 128-128 128s-128-57.308-128-128zM917.333 576c0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64s-64-28.654-64-64zm-112.47 271.53c0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64s-64-28.654-64-64zM533.335 960c0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64s-64-28.654-64-64zm-271.53-112.47c0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64s-64-28.654-64-64zm-32-543.06c0-53.019 42.981-96 96-96s96 42.981 96 96-42.98 96-96 96-96-42.981-96-96zM141.333 576c0-39.765 32.235-72 72-72s72 32.235 72 72-32.235 72-72 72-72-32.235-72-72z"/>
                    </svg>
                </div>
                
                <div class="welcome-content">
                    <p class="welcome-tagline">Verify the authenticity and provenance of any image</p>
                    <p class="welcome-instruction">Drop an image anywhere</p>
                    
                    or <label for="fileInput" class="select-file-link">select a file</label>
                    
                    <input type="file" id="fileInput" accept="image/*" hidden>
                    
                    <a href="https://contentcredentials.org/about/" target="_blank" rel="noopener" class="cc-info">
                        <p class="cc-info-text">Learn more about</p>
                        <img src="content_credentials_logo.svg" alt="Content Credentials" class="cc-logo-inline">
                    </a>
                </div>
            </div>
        </div>

        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-toolbar">
                <div class="toolbar-buttons">
                    <button class="toolbar-btn" id="resetBtn" aria-label="Reset to welcome page">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M7 6a7.75 7.75 0 1 0 10 0" />
                            <path d="M12 4l0 8" />
                        </svg>
                    </button>
                    <button class="toolbar-btn" id="themeToggle" aria-label="Toggle theme">
                        <svg class="sun-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="5"/>
                            <line x1="12" y1="1" x2="12" y2="3"/>
                            <line x1="12" y1="21" x2="12" y2="23"/>
                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
                            <line x1="1" y1="12" x2="3" y2="12"/>
                            <line x1="21" y1="12" x2="23" y2="12"/>
                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
                        </svg>
                        <svg class="moon-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </button>
                    <button class="toolbar-btn" id="infoBtn" aria-label="About this app">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="10"/>
                            <line x1="12" y1="16" x2="12" y2="12"/>
                            <line x1="12" y1="8" x2="12.01" y2="8"/>
                        </svg>
                    </button>
                </div>
                <a href="https://contentcredentials.org/about/" target="_blank" class="toolbar-logo-link">
                    <img src="content_credentials_logo.svg" alt="Content Credentials Logo" class="toolbar-logo">
                </a>
            </div>
            
            <!-- Image Title Header -->
            <div class="image-title-header" id="imageTitleHeader">
                <h1 class="image-title" id="imageTitle"></h1>
                <p class="image-caption" id="imageCaption"></p>
            </div>
                
            <div class="sidebar-content">
                <!-- Content Credentials Status - Most Important -->
                <div class="cc-status-section" id="ccStatusSection">
                    <div class="cc-status-card cc-status-empty" id="ccStatusCard">
                        <div class="cc-status-header">
                            <div class="cc-status-icon" id="ccStatusIcon"></div>
                            <div class="cc-status-title">
                                <span class="cc-status-label" id="ccStatusLabel">Content Credentials</span>
                                <span class="cc-status-value" id="ccStatusValue"></span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Digital Source Type Badge -->
                <div class="cc-status-section digital-source-section" id="digitalSourceSection" style="display: none;">
                    <div class="cc-status-card" id="digitalSourceCard">
                        <div class="cc-status-header">
                            <div class="cc-status-icon" id="digitalSourceIcon"></div>
                            <div class="cc-status-title">
                                <span class="cc-status-label">Digital Source</span>
                                <span class="cc-status-value" id="digitalSourceLabel"></span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Image Overview -->
                <div class="overview-section thumbnail-section">
                    <div class="overview-header">
                        <h2 class="section-title">Source Image</h2>
                        <span class="file-badge" id="fileFormatBadge"></span>
                    </div>
                    <div class="overview-content">
                        <div class="thumbnail-container">
                            <img id="sourceImage" class="thumbnail" src="" alt="Original Image Thumbnail" style="display: none;">
                            <div class="thumbnail-placeholder" id="thumbnailPlaceholder">
                                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                                    <circle cx="8.5" cy="8.5" r="1.5"/>
                                    <polyline points="21 15 16 10 5 21"/>
                                </svg>
                            </div>
                        </div>
                        <div class="overview-meta">
                            <p class="dimensions" id="overviewDimensions"></p>
                            <p class="filesize" id="overviewFileSize"></p>
                        </div>
                        <div class="overview-dates">
                            <div class="date-item">
                                <span class="date-label">Captured</span>
                                <span class="date-value" id="dateOriginal"></span>
                            </div>
                            <div class="date-item">
                                <span class="date-label">Digitized</span>
                                <span class="date-value" id="dateDigitized"></span>
                            </div>
                            <div class="date-item" id="gpsItem" style="display: none;">
                                <span class="date-label">Location</span>
                                <span class="date-value" id="gpsCoordinates"></span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Provenance Timeline -->
                <div class="provenance-section">
                    <h2 class="section-title">Provenance History</h2>
                    <div class="provenance-timeline" id="provenanceTimeline">
                        <div class="timeline-empty" id="provenanceEmpty">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <circle cx="12" cy="12" r="10"/>
                                <line x1="12" y1="8" x2="12" y2="12"/>
                                <line x1="12" y1="16" x2="12.01" y2="16"/>
                            </svg>
                            <p>No provenance information available</p>
                        </div>
                        <ul class="provenance-list" id="provenanceList" style="display: none;">
                            <!-- Populated by JavaScript -->
                        </ul>
                    </div>
                </div>

                <!-- Technical Information -->
                <div class="technical-section metadata-grid">
                    <h2 class="section-title">Technical Details</h2>
                    
                    <!-- Camera & Lens -->
                    <div class="tech-group metadata-section">
                        <h3 class="tech-group-title">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/>
                                <circle cx="12" cy="13" r="4"/>
                            </svg>
                            Camera & Lens
                        </h3>
                        <div class="tech-grid">
                            <div class="tech-item metadata-item">
                                <span class="tech-label metadata-label">Camera Make</span>
                                <span class="tech-value metadata-value" id="cameraMake"></span>
                            </div>
                            <div class="tech-item metadata-item">
                                <span class="tech-label metadata-label">Camera Model</span>
                                <span class="tech-value metadata-value" id="cameraModel"></span>
                            </div>
                            <div class="tech-item metadata-item">
                                <span class="tech-label metadata-label">Lens</span>
                                <span class="tech-value metadata-value" id="lensModel"></span>
                            </div>
                        </div>
                    </div>

                    <!-- Exposure Settings -->
                    <div class="tech-group metadata-section">
                        <h3 class="tech-group-title">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="3"/>
                                <path d="M12 1v6m0 6v6m4.22-10.22l4.24-4.24M6.34 17.66l-4.24 4.24M23 12h-6m-6 0H1m20.24 4.24l-4.24-4.24M6.34 6.34L2.1 2.1"/>
                            </svg>
                            Exposure Settings
                        </h3>
                        <div class="tech-grid">
                            <div class="tech-item metadata-item">
                                <span class="tech-label metadata-label">Exposure Mode</span>
                                <span class="tech-value metadata-value" id="exposureMode"></span>
                            </div>
                            <div class="tech-item metadata-item">
                                <span class="tech-label metadata-label">White Balance</span>
                                <span class="tech-value metadata-value" id="whiteBalance"></span>
                            </div>
                            <div class="tech-item metadata-item">
                                <span class="tech-label metadata-label">Flash</span>
                                <span class="tech-value metadata-value" id="flash"></span>
                            </div>
                        </div>
                        <div class="tech-grid">
                            <div class="tech-item metadata-item">
                                <span class="tech-label metadata-label">Aperture</span>
                                <span class="tech-value metadata-value" id="aperture"></span>
                            </div>
                            <div class="tech-item metadata-item">
                                <span class="tech-label metadata-label">Shutter</span>
                                <span class="tech-value metadata-value" id="shutterSpeed"></span>
                            </div>
                            <div class="tech-item metadata-item">
                                <span class="tech-label metadata-label">ISO</span>
                                <span class="tech-value metadata-value" id="iso"></span>
                            </div>
                            <div class="tech-item metadata-item">
                                <span class="tech-label metadata-label">Focal Length</span>
                                <span class="tech-value metadata-value" id="focalLength"></span>
                            </div>
                        </div>
                    </div>

                    <!-- Image Properties -->
                    <div class="tech-group metadata-section">
                        <h3 class="tech-group-title">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                                <line x1="8" y1="12" x2="16" y2="12"/>
                                <line x1="12" y1="8" x2="12" y2="16"/>
                            </svg>
                            Image Properties
                        </h3>
                        <div class="tech-grid">
                            <div class="tech-item metadata-item">
                                <span class="tech-label metadata-label">Resolution</span>
                                <span class="tech-value metadata-value" id="resolution"></span>
                            </div>
                            <div class="tech-item metadata-item">
                                <span class="tech-label metadata-label">Dimensions</span>
                                <span class="tech-value metadata-value" id="dimensions"></span>
                            </div>
                            <div class="tech-item metadata-item">
                                <span class="tech-label metadata-label">Color Space</span>
                                <span class="tech-value metadata-value" id="colorSpace"></span>
                            </div>
                            <div class="tech-item metadata-item">
                                <span class="tech-label metadata-label">Color Profile</span>
                                <span class="tech-value metadata-value" id="colorProfile"></span>
                            </div>
                            <div class="tech-item metadata-item">
                                <span class="tech-label metadata-label">Software</span>
                                <span class="tech-value metadata-value" id="software"></span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Creator Information -->
                <div class="creator-section metadata-grid">
                    <h2 class="section-title">Creator Information</h2>
                    <div class="creator-grid">
                        <div class="creator-item metadata-item">
                            <span class="creator-label metadata-label">Artist</span>
                            <span class="creator-value metadata-value" id="artist"></span>
                        </div>
                        <div class="creator-item metadata-item" id="authorWebsiteItem" style="display: none;">
                            <span class="creator-label metadata-label">Website</span>
                            <span class="creator-value metadata-value" id="authorWebsite"></span>
                        </div>
                        <div class="creator-item metadata-item" id="authorEmailItem" style="display: none;">
                            <span class="creator-label metadata-label">Email</span>
                            <span class="creator-value metadata-value" id="authorEmail"></span>
                        </div>
                        <div class="creator-item metadata-item" id="authorPhoneItem" style="display: none;">
                            <span class="creator-label metadata-label">Phone</span>
                            <span class="creator-value metadata-value" id="authorPhone"></span>
                        </div>
                        <div class="creator-item metadata-item" id="authorJobItem" style="display: none;">
                            <span class="creator-label metadata-label">Title</span>
                            <span class="creator-value metadata-value" id="authorJob"></span>
                        </div>
                        <div class="creator-item metadata-item" id="authorOrgItem" style="display: none;">
                            <span class="creator-label metadata-label">Organization</span>
                            <span class="creator-value metadata-value" id="authorOrg"></span>
                        </div>
                        <div class="creator-social" id="authorSocial" style="display: none;">
                            <span class="creator-label metadata-label">Social Media</span>
                            <div class="social-links" id="socialLinks"></div>
                        </div>


                    </div>
                </div>

                <!-- Description -->
                <div class="description-section metadata-section">
                    <h3 class="tech-group-title">Description</h3>
                    <p class="description-text" id="imageDescription"></p>
                    <div class="keywords-list" id="keywordsList"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- About Modal -->
    <div class="modal-overlay" id="aboutModal">
        <div class="modal-content">
            <button class="modal-close" id="modalClose" aria-label="Close">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="18" y1="6" x2="6" y2="18"/>
                    <line x1="6" y1="6" x2="18" y2="18"/>
                </svg>
            </button>
            <div class="modal-header">
                <img src="content_credentials_logo.svg" alt="Content Credentials" class="modal-logo">
                <h2>About This App</h2>
            </div>
            <div class="modal-body">
                <p class="modal-description">
                    This tool helps you verify the authenticity and provenance of images through <strong>Content Credentials</strong> â€” 
                    a digital nutrition label for visual content that shows who created an image, how it was made, 
                    and what changes were made along the way.
                </p>                

                <h3>What are Content Credentials?</h3>
                <p>
                    Content Credentials are an open standard developed by the Coalition for Content Provenance and Authenticity (C2PA). 
                    They embed tamper-evident metadata into images to combat misinformation and ensure proper attribution for creators.
                </p>
                
                <h3>Why This Matters</h3>
                <p>
                    With AI-generated images and deepfakes becoming more common, it is getting harder to tell what is real at a glance.
                    Tools like this help you quickly check provenance before you trust, share, or publish an image.
                    For context, see this <a href="https://www.technologyreview.com/2023/07/28/1076843/cryptography-ai-labeling-problem-c2pa-provenance/" target="_blank" rel="noopener">MIT Technology Review report</a> about the problem we're up against.
                </p>
                
                <h3>How to Use</h3>
                <ul>
                    <li>Drop any image onto the viewer to inspect its Content Credentials</li>
                    <li>View the provenance history to see editing steps and tools used</li>
                    <li>Check technical metadata like camera settings and location data</li>
                    <li>Verify the authenticity of images before sharing</li>
                </ul>
                <p>
                    <strong>Privacy note:</strong> Metadata extraction is securely processed on the server. Images are immediately deleted thereafter. No data is stored or retained.
                </p>

                <h3>About the Creator</h3>
                <p>
                    This tool was built by Mahesh Shantaram, a documentary photographer and data scientist based in Bangalore, India.
                    Mahesh is passionate about digital authenticity and combating misinformation. For more, visit <a href="https://thecontrarian.in/" target="_blank" rel="noopener">thecontrarian.in</a>.
                </p>
                <p>
                    For technical details, visit this app's <a href="https://github.com/thecont1/c2pa-viewer" target="_blank" rel="noopener">GitHub repo</a>.
                </p>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
